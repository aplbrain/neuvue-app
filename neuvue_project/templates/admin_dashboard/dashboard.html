{% extends "base.html" %}
{% load static %}
{% load socialaccount %}

{% block header_includes %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="basic dashboard">

    <!-- Landing page for user to choose namespace and group -->
    <div class="inspect-container">
        <form id="mainForm" action="" method="post" onSubmit="triggerLoadingSpinner('submit-spinner')">
          {% csrf_token %}
          <h3 style="color: white"> Admin Dashboard</h3>
          <div style="margin: 20px"class="form-group">
            
            <label style="color: white" for="namespaceSelect">Namespace</label>
            <select name="namespace" class="form-select" id="namespaceSelect" placeholder="Select one">
                <option value="" selected disabled>Please select</option>
                {% for namespace_opt in all_namespaces %}
                <option>{{namespace_opt}} </option>
                {% endfor %}
            </select>

        </div>
        
        <div style="margin: 20px" class="form-group">
            <label style="color: white" for="groupSelect">Group</label>
            <select name="group" class="form-select" id="groupSelect" placeholder="Select one">
                <option value="" selected disabled>Please select</option>
                {% for group_opt in all_groups %}
                <option>{{group_opt}} </option>
                {% endfor %}
            </select> 
        </div>

        <div style="margin: 20px; color: white; font-style: italic">
        OR
        </div>

        <div style="margin: 20px" class="form-group">
            <label style="color: white" for="userSelect">Username</label>
            <select name="username" class="form-select" id="userSelect" placeholder="Select one">
                <option value="" selected disabled>Please select</option>
                {% for user_opt in all_users %}
                <option>{{user_opt}} </option>
                {% endfor %}
            </select> 
        </div>

        <div style="margin: 20px" class="form-group d-flex">
            <input type="submit" class="btn btn-primary" value="Submit">
            <div id="submit-spinner" class="text-white ms-3 mt-2"></div>
            
            {% if error %}
            <small id="errorMessage" class="form-text text-danger"> {{error}} </small>
            {% endif %}
          
        </div>
        </form>
      </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script type="text/javascript" src="{% static "js/utils.js" %}"></script>
<script type="text/javascript">

    // Remove loading spinners when page loads. This is important if the back button is clicked
    window.addEventListener('pageshow', function(e) {
        if (document.getElementById('submit-spinner') !== null) {
            removeLoadingSpinner('submit-spinner');
        }
    })

</script>
{% endblock %}

